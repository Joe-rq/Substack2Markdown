> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.entropycontroltheory.com](https://www.entropycontroltheory.com/p/lesson-4-playing-with-language-entropy)

> Probably the most useful skill for everyday life when you don’t have a family lawyer on speed-dial — ......

In everyday life, most of us are at a huge disadvantage — not because we’re less capable, but because the professionals around us **weaponize language**.

Your HOA notice? Your mortgage? Your insurance policy? Every single one of them is packed with dense, confusing words that seem designed to make you give up halfway through. Contracts, whether for work or investing, are written in a language that feels almost alien.

And it doesn’t stop there.

Emails across departments, or worse — across countries — are full of polite vagueness and hidden traps. One wrong interpretation, one careless reply, and you could end up in a meeting, a penalty, or even a lawsuit.

Of course, not all language has to be so strict.

When we write to our families, share love letters, or write poetry, **ambiguity is warmth**.

It gives room for emotion, rhythm, and mystery.

That kind of language lives by what I call **high entropy** — a beautiful mess that allows infinite interpretation.

But then there are domains where ambiguity is fatal.

A legal clause, a contract, an insurance term, a trade agreement — these demand **the lowest possible entropy**.

Because every missing definition, every vague pronoun, every “reasonable effort” clause can cost you thousands of dollars and hours with a lawyer billing at $500 per hour.

So how do we defend ourselves?

Before we move on, let me introduce one of the most practical concepts in my framework — something you can **use immediately**, not just read about.

It’s called **Language Entropy**, and my solution to control it is a small but powerful tool called the **Primitive IR Compiler** — a ready-to-use [SKILL.md](http://skill.md/) file available to paid subscribers.

You can copy it, run it, and instantly see how your everyday sentences — the same ones that hide traps in contracts — can be **translated into clear, structured meaning**.

[![](https://substackcdn.com/image/fetch/$s_!7zHO!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac7ce19c-2d98-4348-9d90-df75652d8a4c_1536x1024.heic)](https://substackcdn.com/image/fetch/$s_!7zHO!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fac7ce19c-2d98-4348-9d90-df75652d8a4c_1536x1024.heic)

Think of _language entropy_ as the **amount of uncertainty inside words**.

The higher the entropy, the more ways a sentence can be interpreted.

Low-entropy language, on the other hand, leaves no room for guessing — everyone involved interprets it the same way.

[![](https://substackcdn.com/image/fetch/$s_!1khy!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd6d8410f-427d-4efc-8aad-efa7c5c2cb0d_748x327.heic)](https://substackcdn.com/image/fetch/$s_!1khy!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd6d8410f-427d-4efc-8aad-efa7c5c2cb0d_748x327.heic)

When entropy is too high in a place that needs precision, misunderstanding grows — and misunderstanding becomes risk.

The **Primitive IR Compiler** fights entropy by turning fuzzy natural language into **structured primitives** — clear, machine-readable meaning blocks such as:

*   **Entity:** _Who or what are we talking about?_
    
*   **Action:** _What is happening or being required?_
    
*   **Policy:** _Under what condition or rule?_
    
*   **Event:** _When or where does it happen?_
    

With this one skill, you can take any paragraph — from an email, a contract, or a company announcement — and get a breakdown like:

```
- type: Entity
  name: Client
- type: Action
  verb: deliver
  object: Report
- type: Obligation
  duty: payment
  condition: within 30 days


- type: Entity
  name: Client
- type: Action
  verb: deliver
  object: Report
- type: Obligation
  duty: payment
  condition: within 30 days



```

That’s what I mean by _fighting entropy with structure._

Because once you can see the hidden structure of language, you can **see the hidden power dynamics inside it** — who holds responsibility, who has rights, and where ambiguity lives.

_(For subscribers: you can download the ready-to-use SKILL.md ready to upload on Claude at the end of this article and start structuring your world today.)_

[![](https://substackcdn.com/image/fetch/$s_!UIlb!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4ab5631-ae93-42c3-b5bc-d396fd3918c3_745x178.heic)](https://substackcdn.com/image/fetch/$s_!UIlb!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4ab5631-ae93-42c3-b5bc-d396fd3918c3_745x178.heic)

Before diving deeper, let’s set the stage with some background about my approach — the theory behind structuring **Primitive IR**.

Sure, if you’re using Claude or ChatGPT, you can simply ask: _“Summarize this for me.”_

Or: _“Please clarify the following sentences.”_

That works fine for casual use.

But when it comes to **serious operations** — decisions, contracts, code, financial commands — those prompts are nowhere near enough.

Because **precision in language equals precision in execution**.

Sometimes what you truly need isn’t a summary — it’s a **disassembly**.

You want to take a paragraph apart, word by word, and see exactly what’s inside:

*   What is explicitly said?
    
*   What is only implied?
    
*   Who is being referred to, but never named?
    
*   Which clause hides the actual obligation?
    

This is what the **Primitive IR** was designed for — a language microscope that lets you extract, inspect, and control meaning with engineering precision.

My system is not built for yesterday’s world of “chatbots.”

It’s built for the **next decade — the Decade of Agents.**

Soon, agents will have access to real tools: your **email**, **calendar**, **files**, **banking APIs**, and **task automations**.

They will read, write, execute, schedule, and make decisions on your behalf.

Now think about that for a second:

When an agent acts, **you don’t want it to interpret your language — you want it to obey it.**

You want it to execute the exact meaning you intended, not a probability-based guess of what you _might_ have meant.

That’s where **language entropy control** becomes the foundation of trust between you and your agent.

By converting your high-entropy language (vague, emotional, ambiguous) into **low-entropy structures (Primitive IR)**, you create a contract of meaning — one that an agent can read, verify, and execute with absolute fidelity.

After running this routine for a while — clarifying, disassembling, and rewriting your thoughts through Primitive IR — something remarkable happens.

You realize that Large Language Models, which are often described as mere “next-token predictors,” suddenly start behaving like **predictable machines of precision**.

Because when you feed them structured, low-entropy inputs, their probability field collapses into consistency.

They stop guessing. They start _following_.

And when that happens, you finally see it:

Language, when structured correctly, becomes **a programmable medium of thought** —

the same way mathematics became a programmable medium of quantity, and code became a programmable medium of logic.

It’s the missing layer between **natural language** and **machine execution** —

a translation interface where meaning becomes measurable, auditable, and schedulable.

It lets you move from:

[![](https://substackcdn.com/image/fetch/$s_!4ttU!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ca7100d-d1ba-40ef-b165-2c525f6d8502_756x315.heic)](https://substackcdn.com/image/fetch/$s_!4ttU!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ca7100d-d1ba-40ef-b165-2c525f6d8502_756x315.heic)

So yes — you can still chat casually with your AI, but once you’re serious about _control_, once you want to build your own thinking system, your own operating logic — that’s when **Primitive IR** becomes essential.

Let’s walk through a few concrete examples so you can really see how this works.

And to make it interesting—let’s start with **diplomacy**.

We all know what _diplomatic language_ is: it’s polite, elegant, and absolutely packed with hidden meaning.

It’s one of the hardest languages to interpret—an artful mix of courtesy and calculation.

Even when you read official statements or press releases, they sound calm and pleasant on the surface, but you can sense the tension underneath.

Now, I’m not here to turn you—or myself—into a politician.

The goal is simply to **learn how to dissect** that kind of language.

To see how meaning hides behind tone, structure, and omission.

So here’s what I did: I grabbed a random diplomatic paragraph from the news—didn’t even bother to clean it up or format it properly.

We’ll run it directly through my **Claude Skill** called `primitive-ir-compiler`, and see what Claude gives us in return.

This is where the fun begins—watch how a dense, carefully worded statement unpacks into clear **Entities, Actions, Policies, and Events**, all mapped by structure, not guesswork.

```
parse into primitives IR: Upcoming talks between President Donald Trump and Chinese president Xi Jinping could defuse several major economic flashpoints in the trade war between the two countries. The leaders of the world’s two largest economies are expected to meet Thursday in South Korea to negotiate several disputed issues that have threatened both countries in recent months.1 The leaders will hammer out details of an agreement on tariffs, soybeans, rare earth minerals, and fentanyl, Treasury Secretary Scott Bessent said in television interviews this weekend, following his own meetings with his Chinese counterpart.
Superpowers At Odds
“I believe that we have the framework for the two leaders to have a very productive meeting for both sides,” Bessent said on Meet The Press Sunday. “And I think it will be fantastic for U.S. citizens, for U.S. farmers, and for our country in general.”
WHAT THIS MEANS FOR THE ECONOMY
Thursday’s trade talks could be a big step toward de-escalating economic tensions between the world’s two most powerful counties.
Should the negotiations play out as Bessent indicated, they would alleviate several economic threats that have emerged in recent months as the U.S. and China have imposed tit-for-tat trade measures against one another. Stocks __rose Monday on optimism__ that the recent trade wars would de-escalate. Trade tensions had seriously escalated earlier this month after Chinese officials said they would __restrict exports of rare earth minerals__, which are used by high-tech industries all over the world, including the U.S. The minerals are necessary to make batteries, computer chips, and weapons among other products. Trump retaliated by __threatening to impose triple-digit tariffs__ on China, on top of already high import taxes, potentially driving up costs for U.S. consumers and causing shortages of consumer products.
At Issue: Rare Earths, Soybeans And Fentanyl
The extra tariffs are now likely “off the table,” Bessent said on Face The Nation.2 He also said he expects China to issue “some kind of deferral” on its rare earth export controls.

source: <https://www.investopedia.com/what-to-expect-from-thursday-s-us-china-trade-talks-11837919>

parse into primitives IR: Upcoming talks between President Donald Trump and Chinese president Xi Jinping could defuse several major economic flashpoints in the trade war between the two countries. The leaders of the world’s two largest economies are expected to meet Thursday in South Korea to negotiate several disputed issues that have threatened both countries in recent months.1 The leaders will hammer out details of an agreement on tariffs, soybeans, rare earth minerals, and fentanyl, Treasury Secretary Scott Bessent said in television interviews this weekend, following his own meetings with his Chinese counterpart.
Superpowers At Odds
“I believe that we have the framework for the two leaders to have a very productive meeting for both sides,” Bessent said on Meet The Press Sunday. “And I think it will be fantastic for U.S. citizens, for U.S. farmers, and for our country in general.”
WHAT THIS MEANS FOR THE ECONOMY
Thursday’s trade talks could be a big step toward de-escalating economic tensions between the world’s two most powerful counties.
Should the negotiations play out as Bessent indicated, they would alleviate several economic threats that have emerged in recent months as the U.S. and China have imposed tit-for-tat trade measures against one another. Stocks __rose Monday on optimism__ that the recent trade wars would de-escalate. Trade tensions had seriously escalated earlier this month after Chinese officials said they would __restrict exports of rare earth minerals__, which are used by high-tech industries all over the world, including the U.S. The minerals are necessary to make batteries, computer chips, and weapons among other products. Trump retaliated by __threatening to impose triple-digit tariffs__ on China, on top of already high import taxes, potentially driving up costs for U.S. consumers and causing shortages of consumer products.
At Issue: Rare Earths, Soybeans And Fentanyl
The extra tariffs are now likely “off the table,” Bessent said on Face The Nation.2 He also said he expects China to issue “some kind of deferral” on its rare earth export controls.

source: <https://www.investopedia.com/what-to-expect-from-thursday-s-us-china-trade-talks-11837919>


```

[![](https://substackcdn.com/image/fetch/$s_!3zhi!,w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9170784a-12a9-4fe0-be07-2b42dd1b3bcc_670x706.heic)](https://substackcdn.com/image/fetch/$s_!3zhi!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9170784a-12a9-4fe0-be07-2b42dd1b3bcc_670x706.heic)

Ok, now we can see that the Primitive IR compiler skill runs successfully, here’s what they give us as summary:

_I’ll parse this news article into Primitive IR objects by reading the skill documentation first.Now I’ll parse the news article into Primitive IR objects. Let me create a structured output file:I’ve successfully parsed the trade talks article into Primitive IR format. Here’s what I extracted:_

_**Entities (6):**_

*   _Key actors: Donald Trump, Xi Jinping, Scott Bessent_
    
*   _Organizations/locations: United States, China, South Korea_
    

_**Events (4):**_

*   _Upcoming bilateral meeting (Thursday, Oct 30)_
    
*   _Preparatory meetings by Treasury officials_
    
*   _Stock market rise on Monday_
    
*   _China’s rare earth export restrictions_
    

_**Resources (3):**_

*   _Rare earth minerals_
    
*   _Soybeans_
    
*   _Fentanyl_
    

_**Actions (3):**_

*   _Negotiate trade agreement_
    
*   _Threaten triple-digit tariffs (Trump)_
    
*   _Expected deferral of export controls (China)_
    

_**Policies (2):**_

*   _China’s rare earth export restrictions_
    
*   _US threatened tariffs (likely off the table)_
    

_**Obligations (1):**_

*   _Leaders must hammer out agreement details during meeting_
    

_**Ledger (1):**_

*   _Timeline tracking the escalation → de-escalation cycle_
    

*   _**Overall entropy:** 0.32 (moderate ambiguity due to diplomatic language)_
    
*   _**Overall confidence:** 0.91 (high certainty on main facts)_
    
*   _**7 clarifications** needed for missing quantitative details_
    

_[View the complete Primitive IR output](https://www.notion.so/Lesson-4-Playing-with-Language-Entropy-Using-the-Primitive-IR-Skill-29ac8204f965801695b0eb26daccdac1?pvs=21)_

_The output is now structured for chaining into Decision Cards, Action Planners, or Reflection Cards for further processing._

Very good — now let’s dig a little deeper. Make sure your [SKILL.md](http://skill.md/) works just fine like this.

Once you run the text through the skill, you’ll get a **JSON file** as output. This file isn’t just for display — it’s meant for **further processing** later on, when you start connecting agents or building automation workflows.

Before we move forward, I want to walk you through some of these details carefully, because they truly matter.

You’ll soon see that every field in that JSON carries meaning — who’s acting, what’s being acted upon, under what condition, and with what certainty.

Remember, the devil is always in the details.

And once you understand those details, you’ll see how structure turns language from something you _read_ into something you can _command_.

We have a **0.99 confidence** level on who _Donald Trump_ is — clearly identified as the **President**.

In the future, for entities whose roles or titles aren’t so obvious, the system could connect to external tools — what we call **oracles** — to verify that information. But in this case, there’s no ambiguity; the reference is explicit.

Now, notice the field `“trace”: [”direct_mention”]`.That tells us this information came **directly from the original text**, not inferred or guessed. It’s the system’s way of saying, _“I saw this with my own eyes.”_

```
“primitives”: [
    {
      “type”: “Entity”,
      “name”: “Donald Trump”,
      “kind”: “person”,
      “attrs”: {
        “role”: “President of the United States”,
        “title”: “President”
      },
      “meta”: {
        “id”: “PRM-Entity-001”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },

“primitives”: [
    {
      “type”: “Entity”,
      “name”: “Donald Trump”,
      “kind”: “person”,
      “attrs”: {
        “role”: “President of the United States”,
        “title”: “President”
      },
      “meta”: {
        “id”: “PRM-Entity-001”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },


```

Next, look at the event labeled **“bilateral_meeting.”**

It’s recorded with high confidence because it includes clear contextual anchors — **time, location, and participating entities**.

When those details line up, the system scores the event as highly reliable — something we can safely expect to happen, barring unforeseen circumstances.

```
 {
      “type”: “Event”,
      “verb”: “bilateral_meeting”,
      “time”: “2025-10-30T10:00:00+09:00”,
      “actors”: [
        “Donald Trump”,
        “Xi Jinping”
      ],
      “impact_hint”: “potential_de-escalation_of_trade_war”,
      “meta”: {
        “id”: “PRM-Event-007”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.92,
        “entropy”: 0.18,
        “trace”: [”expected_to_meet_Thursday”],
        “version”: 1
      }

 {
      “type”: “Event”,
      “verb”: “bilateral_meeting”,
      “time”: “2025-10-30T10:00:00+09:00”,
      “actors”: [
        “Donald Trump”,
        “Xi Jinping”
      ],
      “impact_hint”: “potential_de-escalation_of_trade_war”,
      “meta”: {
        “id”: “PRM-Event-007”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.92,
        “entropy”: 0.18,
        “trace”: [”expected_to_meet_Thursday”],
        “version”: 1
      }


```

Then comes something more interesting — the system detects **“type”: “Policy”**:

```
{
  “type”: “Policy”,
  “rule”: “Triple-digit tariffs on Chinese imports”,
  “scope”: “US → China”
}


{
  “type”: “Policy”,
  “rule”: “Triple-digit tariffs on Chinese imports”,
  “scope”: “US → China”
}



```

This is where structure begins to show its power.

The model doesn’t just summarize what was said — it **categorizes** the underlying logic.

It sees not just an announcement, but a _rule applied to a scope_ — in this case, a policy governing U.S.–China trade relations.

```
{
      “type”: “Policy”,
      “rule”: “Triple-digit tariffs on Chinese imports”,
      “scope”: “US → China”,
      “conditions”: [
        {
          “type”: “trade_policy”,
          “status”: “threatened_but_likely_off_table”,
          “context”: “retaliation_for_rare_earth_controls”
        }

{
      “type”: “Policy”,
      “rule”: “Triple-digit tariffs on Chinese imports”,
      “scope”: “US → China”,
      “conditions”: [
        {
          “type”: “trade_policy”,
          “status”: “threatened_but_likely_off_table”,
          “context”: “retaliation_for_rare_earth_controls”
        }


```

Finally, look at what the system _doesn’t_ know.

Some parts are left uncertain, marked by higher entropy or lower confidence.

And that’s not a bug — it’s a feature.

Those uncertain areas represent the places where **humans must stay in the loop**.

When the system senses ambiguity, it’s effectively saying:

> “I understand part of this, but I need your judgment to continue.”

This is the essence of **Human–AI collaboration** in decision-making:

the machine handles the clear, structured parts, while the human steps in where meaning remains uncertain.

For now, it’s simply fascinating to watch.

But in the near future, this feedback loop — clarity where possible, human review where not — will become the foundation of how we **trust AI systems to act on our behalf**.

```
  “clarifications”: [
    “What is the exact time of the Thursday meeting in South Korea? (currently estimated as 10:00 AM KST)”,
    “What specific tariff percentage was threatened? (’triple-digit’ could be 100%, 200%, or higher)”,
    “What specific quantity or value of soybeans is being negotiated?”,
    “Is there a framework agreement already in place, or is this the first negotiation?”,
    “What does ‘some kind of deferral’ specifically mean for rare earth export controls? (timeline, conditions)”,
    “Who is Scott Bessent’s Chinese counterpart mentioned in the meetings?”,
    “What are the current baseline tariff rates between US and China?”

  “clarifications”: [
    “What is the exact time of the Thursday meeting in South Korea? (currently estimated as 10:00 AM KST)”,
    “What specific tariff percentage was threatened? (’triple-digit’ could be 100%, 200%, or higher)”,
    “What specific quantity or value of soybeans is being negotiated?”,
    “Is there a framework agreement already in place, or is this the first negotiation?”,
    “What does ‘some kind of deferral’ specifically mean for rare earth export controls? (timeline, conditions)”,
    “Who is Scott Bessent’s Chinese counterpart mentioned in the meetings?”,
    “What are the current baseline tariff rates between US and China?”


```

Now we can ask Claude to generate a **clear version** of the text — rewriting it after parsing, so that all the diplomatic language is translated into plain, straightforward meaning.

In other words, we’ll let the system **decode politeness into precision**, transforming subtle phrases and hidden implications into a statement that says exactly what it means.

```
**Trump and Xi to Meet in South Korea for Trade Talks**

President Donald Trump and Chinese President Xi Jinping are scheduled to meet on Thursday, October 30th, in South Korea to discuss ongoing trade disputes between the United States and China, the world’s two largest economies. Treasury Secretary Scott Bessent, who held preparatory meetings with his Chinese counterpart over the weekend, expects the leaders to work out details on several key issues including tariffs, soybeans, rare earth minerals, and fentanyl.

The meeting comes after trade tensions escalated earlier this month when China announced it would restrict exports of rare earth minerals—critical materials used in batteries, computer chips, and weapons manufacturing. In response, Trump threatened to impose triple-digit tariffs on Chinese goods, which could have driven up costs for American consumers and created product shortages. However, Bessent indicated on Sunday’s talk shows that these extra tariffs are now likely “off the table,” and he expects China to defer its rare earth export controls.

Stock markets rose on Monday as investors reacted positively to the prospect of de-escalating trade tensions. Bessent expressed optimism about the upcoming negotiations, stating he believes the two leaders have a framework for a productive meeting that will benefit American citizens, farmers, and the country overall.

**Outstanding Questions:**

Several details remain unclear about the negotiations. The exact time of Thursday’s meeting in South Korea hasn’t been specified (estimated around 10:00 AM local time). The precise percentage of the threatened “triple-digit” tariffs is unknown—it could mean 100%, 200%, or higher. There’s no information about the specific quantities or dollar values of soybeans being discussed, nor clarity on what “some kind of deferral” means for China’s rare earth export controls in terms of timeline or conditions. It’s also unclear whether this represents the first negotiation or if a framework agreement already exists. The identity of Scott Bessent’s Chinese counterpart wasn’t mentioned, and the current baseline tariff rates between the two countries weren’t provided for context.

**Trump and Xi to Meet in South Korea for Trade Talks**

President Donald Trump and Chinese President Xi Jinping are scheduled to meet on Thursday, October 30th, in South Korea to discuss ongoing trade disputes between the United States and China, the world’s two largest economies. Treasury Secretary Scott Bessent, who held preparatory meetings with his Chinese counterpart over the weekend, expects the leaders to work out details on several key issues including tariffs, soybeans, rare earth minerals, and fentanyl.

The meeting comes after trade tensions escalated earlier this month when China announced it would restrict exports of rare earth minerals—critical materials used in batteries, computer chips, and weapons manufacturing. In response, Trump threatened to impose triple-digit tariffs on Chinese goods, which could have driven up costs for American consumers and created product shortages. However, Bessent indicated on Sunday’s talk shows that these extra tariffs are now likely “off the table,” and he expects China to defer its rare earth export controls.

Stock markets rose on Monday as investors reacted positively to the prospect of de-escalating trade tensions. Bessent expressed optimism about the upcoming negotiations, stating he believes the two leaders have a framework for a productive meeting that will benefit American citizens, farmers, and the country overall.

**Outstanding Questions:**

Several details remain unclear about the negotiations. The exact time of Thursday’s meeting in South Korea hasn’t been specified (estimated around 10:00 AM local time). The precise percentage of the threatened “triple-digit” tariffs is unknown—it could mean 100%, 200%, or higher. There’s no information about the specific quantities or dollar values of soybeans being discussed, nor clarity on what “some kind of deferral” means for China’s rare earth export controls in terms of timeline or conditions. It’s also unclear whether this represents the first negotiation or if a framework agreement already exists. The identity of Scott Bessent’s Chinese counterpart wasn’t mentioned, and the current baseline tariff rates between the two countries weren’t provided for context.


```

Make sure after you run your [SKILL.MD](http://skill.md/), you get one of these:

```
{
  “primitives”: [
    {
      “type”: “Entity”,
      “name”: “Donald Trump”,
      “kind”: “person”,
      “attrs”: {
        “role”: “President of the United States”,
        “title”: “President”
      },
      “meta”: {
        “id”: “PRM-Entity-001”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “Xi Jinping”,
      “kind”: “person”,
      “attrs”: {
        “role”: “President of China”,
        “title”: “President”
      },
      “meta”: {
        “id”: “PRM-Entity-002”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “Scott Bessent”,
      “kind”: “person”,
      “attrs”: {
        “role”: “Treasury Secretary”,
        “title”: “Treasury Secretary”,
        “country”: “United States”
      },
      “meta”: {
        “id”: “PRM-Entity-003”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.98,
        “entropy”: 0.03,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “United States”,
      “kind”: “organization”,
      “attrs”: {
        “type”: “nation_state”,
        “economic_rank”: “1”
      },
      “meta”: {
        “id”: “PRM-Entity-004”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “China”,
      “kind”: “organization”,
      “attrs”: {
        “type”: “nation_state”,
        “economic_rank”: “2”
      },
      “meta”: {
        “id”: “PRM-Entity-005”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “South Korea”,
      “kind”: “location”,
      “attrs”: {
        “type”: “country”,
        “role”: “meeting_venue”
      },
      “meta”: {
        “id”: “PRM-Entity-006”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.97,
        “entropy”: 0.05,
        “trace”: [”location_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “bilateral_meeting”,
      “time”: “2025-10-30T10:00:00+09:00”,
      “actors”: [
        “Donald Trump”,
        “Xi Jinping”
      ],
      “impact_hint”: “potential_de-escalation_of_trade_war”,
      “meta”: {
        “id”: “PRM-Event-007”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.92,
        “entropy”: 0.18,
        “trace”: [”expected_to_meet_Thursday”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “counterpart_meetings”,
      “time”: “2025-10-26T12:00:00-04:00”,
      “actors”: [
        “Scott Bessent”,
        “Chinese_counterpart”
      ],
      “impact_hint”: “preparatory_negotiations”,
      “meta”: {
        “id”: “PRM-Event-008”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.88,
        “entropy”: 0.22,
        “trace”: [”this_weekend_reference”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “stock_market_rise”,
      “time”: “2025-10-27T09:30:00-04:00”,
      “actors”: [
        “US_stock_market”
      ],
      “impact_hint”: “positive_sentiment_on_trade_talks”,
      “meta”: {
        “id”: “PRM-Event-009”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.94,
        “entropy”: 0.12,
        “trace”: [”stocks_rose_Monday”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “restrict_exports”,
      “time”: “2025-10-15T12:00:00+08:00”,
      “actors”: [
        “China”
      ],
      “impact_hint”: “supply_chain_threat”,
      “meta”: {
        “id”: “PRM-Event-010”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.91,
        “entropy”: 0.20,
        “trace”: [”earlier_this_month”],
        “version”: 1
      }
    },
    {
      “type”: “Resource”,
      “name”: “rare_earth_minerals”,
      “unit”: “commodity”,
      “quantity”: null,
      “meta”: {
        “id”: “PRM-Resource-011”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.96,
        “entropy”: 0.08,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Resource”,
      “name”: “soybeans”,
      “unit”: “commodity”,
      “quantity”: null,
      “meta”: {
        “id”: “PRM-Resource-012”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.97,
        “entropy”: 0.06,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Resource”,
      “name”: “fentanyl”,
      “unit”: “substance”,
      “quantity”: null,
      “meta”: {
        “id”: “PRM-Resource-013”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.98,
        “entropy”: 0.04,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Action”,
      “verb”: “negotiate”,
      “actor”: “Donald Trump, Xi Jinping”,
      “object”: {
        “type”: “Entity”,
        “name”: “trade_agreement”,
        “kind”: “policy_framework”
      },
      “params”: {
        “topics”: [
          “tariffs”,
          “soybeans”,
          “rare_earth_minerals”,
          “fentanyl”
        ],
        “location”: “South Korea”,
        “scheduled_time”: “2025-10-30T10:00:00+09:00”
      },
      “meta”: {
        “id”: “PRM-Action-014”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.93,
        “entropy”: 0.15,
        “trace”: [”negotiate_several_disputed_issues”],
        “version”: 1
      }
    },
    {
      “type”: “Action”,
      “verb”: “threaten_tariffs”,
      “actor”: “Donald Trump”,
      “object”: {
        “type”: “Entity”,
        “name”: “China”,
        “kind”: “organization”
      },
      “params”: {
        “tariff_level”: “triple-digit”,
        “context”: “retaliation_for_rare_earth_restrictions”
      },
      “meta”: {
        “id”: “PRM-Action-015”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.95,
        “entropy”: 0.10,
        “trace”: [”threatening_to_impose_triple-digit_tariffs”],
        “version”: 1
      }
    },
    {
      “type”: “Action”,
      “verb”: “defer”,
      “actor”: “China”,
      “object”: {
        “type”: “Resource”,
        “name”: “rare_earth_minerals”,
        “unit”: “commodity”
      },
      “params”: {
        “action_type”: “export_control_deferral”,
        “expectation_source”: “Scott Bessent”
      },
      “meta”: {
        “id”: “PRM-Action-016”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.87,
        “entropy”: 0.28,
        “trace”: [”expects_China_to_issue_some_kind_of_deferral”],
        “version”: 1
      }
    },
    {
      “type”: “Policy”,
      “rule”: “Export restrictions on rare earth minerals”,
      “scope”: “China → global markets”,
      “conditions”: [
        {
          “type”: “trade_policy”,
          “status”: “active”,
          “announced”: “2025-10-15”
        }
      ],
      “meta”: {
        “id”: “PRM-Policy-017”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.93,
        “entropy”: 0.14,
        “trace”: [”restrict_exports_of_rare_earth_minerals”],
        “version”: 1
      }
    },
    {
      “type”: “Policy”,
      “rule”: “Triple-digit tariffs on Chinese imports”,
      “scope”: “US → China”,
      “conditions”: [
        {
          “type”: “trade_policy”,
          “status”: “threatened_but_likely_off_table”,
          “context”: “retaliation_for_rare_earth_controls”
        }
      ],
      “meta”: {
        “id”: “PRM-Policy-018”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.90,
        “entropy”: 0.20,
        “trace”: [”threatening_to_impose_triple-digit_tariffs”, “likely_off_the_table”],
        “version”: 1
      }
    },
    {
      “type”: “Obligation”,
      “duty”: “hammer_out_agreement_details”,
      “holder”: “Donald Trump, Xi Jinping”,
      “condition”: “during_Thursday_meeting”,
      “meta”: {
        “id”: “PRM-Obl-019”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.91,
        “entropy”: 0.18,
        “trace”: [”leaders_will_hammer_out_details”],
        “version”: 1
      }
    },
    {
      “type”: “Ledger”,
      “entry”: “Trade war escalation → de-escalation negotiation cycle”,
      “timestamp”: “2025-10-28T12:00:00-04:00”,
      “ref”: {
        “event_sequence”: [
          “PRM-Event-010”,
          “PRM-Action-015”,
          “PRM-Event-007”
        ]
      },
      “meta”: {
        “id”: “PRM-Ledger-020”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.89,
        “entropy”: 0.22,
        “trace”: [”article_narrative_arc”],
        “version”: 1
      }
    }
  ],
  “clarifications”: [
    “What is the exact time of the Thursday meeting in South Korea? (currently estimated as 10:00 AM KST)”,
    “What specific tariff percentage was threatened? (’triple-digit’ could be 100%, 200%, or higher)”,
    “What specific quantity or value of soybeans is being negotiated?”,
    “Is there a framework agreement already in place, or is this the first negotiation?”,
    “What does ‘some kind of deferral’ specifically mean for rare earth export controls? (timeline, conditions)”,
    “Who is Scott Bessent’s Chinese counterpart mentioned in the meetings?”,
    “What are the current baseline tariff rates between US and China?”
  ],
  “meta”: {
    “entropy”: 0.32,
    “confidence”: 0.91,
    “trace_id”: “TRADE-001”,
    “notes”: “Article contains high-level diplomatic language with some specifics (dates, actors) but lacks quantitative details on resources and precise policy parameters. Several temporal references are relative (e.g., ‘this weekend’, ‘earlier this month’) requiring inference based on article context. Assumed reference time of 2025-10-28 for parsing.”,
    “domain”: “geopolitics, trade, finance”,
    “language”: “en”,
    “time_zone”: “America/New_York”
  }
}

{
  “primitives”: [
    {
      “type”: “Entity”,
      “name”: “Donald Trump”,
      “kind”: “person”,
      “attrs”: {
        “role”: “President of the United States”,
        “title”: “President”
      },
      “meta”: {
        “id”: “PRM-Entity-001”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “Xi Jinping”,
      “kind”: “person”,
      “attrs”: {
        “role”: “President of China”,
        “title”: “President”
      },
      “meta”: {
        “id”: “PRM-Entity-002”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “Scott Bessent”,
      “kind”: “person”,
      “attrs”: {
        “role”: “Treasury Secretary”,
        “title”: “Treasury Secretary”,
        “country”: “United States”
      },
      “meta”: {
        “id”: “PRM-Entity-003”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.98,
        “entropy”: 0.03,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “United States”,
      “kind”: “organization”,
      “attrs”: {
        “type”: “nation_state”,
        “economic_rank”: “1”
      },
      “meta”: {
        “id”: “PRM-Entity-004”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “China”,
      “kind”: “organization”,
      “attrs”: {
        “type”: “nation_state”,
        “economic_rank”: “2”
      },
      “meta”: {
        “id”: “PRM-Entity-005”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.99,
        “entropy”: 0.02,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Entity”,
      “name”: “South Korea”,
      “kind”: “location”,
      “attrs”: {
        “type”: “country”,
        “role”: “meeting_venue”
      },
      “meta”: {
        “id”: “PRM-Entity-006”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.97,
        “entropy”: 0.05,
        “trace”: [”location_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “bilateral_meeting”,
      “time”: “2025-10-30T10:00:00+09:00”,
      “actors”: [
        “Donald Trump”,
        “Xi Jinping”
      ],
      “impact_hint”: “potential_de-escalation_of_trade_war”,
      “meta”: {
        “id”: “PRM-Event-007”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.92,
        “entropy”: 0.18,
        “trace”: [”expected_to_meet_Thursday”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “counterpart_meetings”,
      “time”: “2025-10-26T12:00:00-04:00”,
      “actors”: [
        “Scott Bessent”,
        “Chinese_counterpart”
      ],
      “impact_hint”: “preparatory_negotiations”,
      “meta”: {
        “id”: “PRM-Event-008”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.88,
        “entropy”: 0.22,
        “trace”: [”this_weekend_reference”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “stock_market_rise”,
      “time”: “2025-10-27T09:30:00-04:00”,
      “actors”: [
        “US_stock_market”
      ],
      “impact_hint”: “positive_sentiment_on_trade_talks”,
      “meta”: {
        “id”: “PRM-Event-009”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.94,
        “entropy”: 0.12,
        “trace”: [”stocks_rose_Monday”],
        “version”: 1
      }
    },
    {
      “type”: “Event”,
      “verb”: “restrict_exports”,
      “time”: “2025-10-15T12:00:00+08:00”,
      “actors”: [
        “China”
      ],
      “impact_hint”: “supply_chain_threat”,
      “meta”: {
        “id”: “PRM-Event-010”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.91,
        “entropy”: 0.20,
        “trace”: [”earlier_this_month”],
        “version”: 1
      }
    },
    {
      “type”: “Resource”,
      “name”: “rare_earth_minerals”,
      “unit”: “commodity”,
      “quantity”: null,
      “meta”: {
        “id”: “PRM-Resource-011”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.96,
        “entropy”: 0.08,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Resource”,
      “name”: “soybeans”,
      “unit”: “commodity”,
      “quantity”: null,
      “meta”: {
        “id”: “PRM-Resource-012”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.97,
        “entropy”: 0.06,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Resource”,
      “name”: “fentanyl”,
      “unit”: “substance”,
      “quantity”: null,
      “meta”: {
        “id”: “PRM-Resource-013”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.98,
        “entropy”: 0.04,
        “trace”: [”direct_mention”],
        “version”: 1
      }
    },
    {
      “type”: “Action”,
      “verb”: “negotiate”,
      “actor”: “Donald Trump, Xi Jinping”,
      “object”: {
        “type”: “Entity”,
        “name”: “trade_agreement”,
        “kind”: “policy_framework”
      },
      “params”: {
        “topics”: [
          “tariffs”,
          “soybeans”,
          “rare_earth_minerals”,
          “fentanyl”
        ],
        “location”: “South Korea”,
        “scheduled_time”: “2025-10-30T10:00:00+09:00”
      },
      “meta”: {
        “id”: “PRM-Action-014”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.93,
        “entropy”: 0.15,
        “trace”: [”negotiate_several_disputed_issues”],
        “version”: 1
      }
    },
    {
      “type”: “Action”,
      “verb”: “threaten_tariffs”,
      “actor”: “Donald Trump”,
      “object”: {
        “type”: “Entity”,
        “name”: “China”,
        “kind”: “organization”
      },
      “params”: {
        “tariff_level”: “triple-digit”,
        “context”: “retaliation_for_rare_earth_restrictions”
      },
      “meta”: {
        “id”: “PRM-Action-015”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.95,
        “entropy”: 0.10,
        “trace”: [”threatening_to_impose_triple-digit_tariffs”],
        “version”: 1
      }
    },
    {
      “type”: “Action”,
      “verb”: “defer”,
      “actor”: “China”,
      “object”: {
        “type”: “Resource”,
        “name”: “rare_earth_minerals”,
        “unit”: “commodity”
      },
      “params”: {
        “action_type”: “export_control_deferral”,
        “expectation_source”: “Scott Bessent”
      },
      “meta”: {
        “id”: “PRM-Action-016”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.87,
        “entropy”: 0.28,
        “trace”: [”expects_China_to_issue_some_kind_of_deferral”],
        “version”: 1
      }
    },
    {
      “type”: “Policy”,
      “rule”: “Export restrictions on rare earth minerals”,
      “scope”: “China → global markets”,
      “conditions”: [
        {
          “type”: “trade_policy”,
          “status”: “active”,
          “announced”: “2025-10-15”
        }
      ],
      “meta”: {
        “id”: “PRM-Policy-017”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.93,
        “entropy”: 0.14,
        “trace”: [”restrict_exports_of_rare_earth_minerals”],
        “version”: 1
      }
    },
    {
      “type”: “Policy”,
      “rule”: “Triple-digit tariffs on Chinese imports”,
      “scope”: “US → China”,
      “conditions”: [
        {
          “type”: “trade_policy”,
          “status”: “threatened_but_likely_off_table”,
          “context”: “retaliation_for_rare_earth_controls”
        }
      ],
      “meta”: {
        “id”: “PRM-Policy-018”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.90,
        “entropy”: 0.20,
        “trace”: [”threatening_to_impose_triple-digit_tariffs”, “likely_off_the_table”],
        “version”: 1
      }
    },
    {
      “type”: “Obligation”,
      “duty”: “hammer_out_agreement_details”,
      “holder”: “Donald Trump, Xi Jinping”,
      “condition”: “during_Thursday_meeting”,
      “meta”: {
        “id”: “PRM-Obl-019”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.91,
        “entropy”: 0.18,
        “trace”: [”leaders_will_hammer_out_details”],
        “version”: 1
      }
    },
    {
      “type”: “Ledger”,
      “entry”: “Trade war escalation → de-escalation negotiation cycle”,
      “timestamp”: “2025-10-28T12:00:00-04:00”,
      “ref”: {
        “event_sequence”: [
          “PRM-Event-010”,
          “PRM-Action-015”,
          “PRM-Event-007”
        ]
      },
      “meta”: {
        “id”: “PRM-Ledger-020”,
        “lang”: “en”,
        “source”: “raw_text”,
        “confidence”: 0.89,
        “entropy”: 0.22,
        “trace”: [”article_narrative_arc”],
        “version”: 1
      }
    }
  ],
  “clarifications”: [
    “What is the exact time of the Thursday meeting in South Korea? (currently estimated as 10:00 AM KST)”,
    “What specific tariff percentage was threatened? (’triple-digit’ could be 100%, 200%, or higher)”,
    “What specific quantity or value of soybeans is being negotiated?”,
    “Is there a framework agreement already in place, or is this the first negotiation?”,
    “What does ‘some kind of deferral’ specifically mean for rare earth export controls? (timeline, conditions)”,
    “Who is Scott Bessent’s Chinese counterpart mentioned in the meetings?”,
    “What are the current baseline tariff rates between US and China?”
  ],
  “meta”: {
    “entropy”: 0.32,
    “confidence”: 0.91,
    “trace_id”: “TRADE-001”,
    “notes”: “Article contains high-level diplomatic language with some specifics (dates, actors) but lacks quantitative details on resources and precise policy parameters. Several temporal references are relative (e.g., ‘this weekend’, ‘earlier this month’) requiring inference based on article context. Assumed reference time of 2025-10-28 for parsing.”,
    “domain”: “geopolitics, trade, finance”,
    “language”: “en”,
    “time_zone”: “America/New_York”
  }
}


```

Now go ahead and **install your [SKILL.md](http://skill.md/)** — start using it to read contracts, news articles, and those endless HOA documents.

Don’t let the big words from lawyers or finance people intimidate you ever again.

With this skill, you’ll finally see through the jargon, uncover the real structure beneath the language, and know exactly **who’s doing what, under what rule, and to whom**.

In short: stop being lost in legal fog — start **reading like an engineer of meaning.**

```
---
name: primitive-ir-compiler
description: >
  Convert high-entropy natural language into low-entropy Primitive IR objects
  (Entity, Resource, Event, Obligation, Action, Policy, Ledger) with metadata.
  Designed for chaining into Structure Cards (Decision, Action Planner, Reflection).
---
inputs:
  - id: raw_text
    type: string
    required: true
    description: High-entropy natural language to parse.
  - id: language
    type: string
    required: false
    default: en
    description: ISO language code of input (en, zh-CN, etc.).
  - id: domain
    type: string
    required: false
    default: general
    description: Domain hints (general, finance, law, education...).
  - id: time_zone
    type: string
    required: false
    default: America/New_York
    description: IANA time zone for normalizing dates/times.
  - id: reference_time
    type: string
    required: false
    description: ISO-8601 timestamp to resolve relative times like “tomorrow”.
  - id: require_types
    type: list[string]
    required: false
    description: If present, only emit these primitive types (e.g., [”Entity”,”Action”]).
  - id: allow_partial
    type: boolean
    required: false
    default: true
    description: Emit best-effort primitives even if some fields are missing (raise entropy).
  - id: vocab_seeds
    type: object
    required: false
    description: Controlled vocab seeds (e.g., tickers, units, indicators) to anchor fields.

outputs:
  - id: primitives
    type: list[object]
    description: List of Primitive IR objects (schemas below).
  - id: clarifications
    type: list[string]
    description: Natural-language questions/assumptions made to reduce entropy.
  - id: meta
    type: object
    description: Extraction diagnostics {entropy, confidence, trace_id, notes}.

# -----------------------
# Primitive IR Schemas
# -----------------------
schemas:
  entity:
    type: object
    required: [type, name]
    properties:
      type: {const: Entity}
      name: {type: string}
      kind: {type: string, enum_hint: [person, organization, equity, account, dataset, location]}
      attrs: {type: object}
      meta: {$ref: “#/schemas/meta”}
  resource:
    type: object
    required: [type, name, unit]
    properties:
      type: {const: Resource}
      name: {type: string}
      unit: {type: string}      # ISO-4217 for currency if applicable
      quantity: {type: number}
      meta: {$ref: “#/schemas/meta”}
  event:
    type: object
    required: [type, verb, time]
    properties:
      type: {const: Event}
      verb: {type: string}
      time: {type: string}      # ISO-8601 with time zone
      actors: {type: list[string]}
      impact_hint: {type: string}
      meta: {$ref: “#/schemas/meta”}
  obligation:
    type: object
    required: [type, duty, holder]
    properties:
      type: {const: Obligation}
      duty: {type: string}
      holder: {type: string}
      condition: {type: string}
      meta: {$ref: “#/schemas/meta”}
  action:
    type: object
    required: [type, verb, actor]
    properties:
      type: {const: Action}
      verb: {type: string}
      actor: {type: string}
      object: {type: object}    # usually an Entity
      params: {type: object}
      meta: {$ref: “#/schemas/meta”}
  policy:
    type: object
    required: [type, rule]
    properties:
      type: {const: Policy}
      rule: {type: string}
      scope: {type: string}
      conditions: {type: list[object]}
      meta: {$ref: “#/schemas/meta”}
  ledger:
    type: object
    required: [type, entry, timestamp]
    properties:
      type: {const: Ledger}
      entry: {type: string}
      timestamp: {type: string} # ISO-8601 with time zone
      ref: {type: object}
      meta: {$ref: “#/schemas/meta”}
  meta:
    type: object
    required: [id, confidence, entropy]
    properties:
      id: {type: string}        # PRM-<Type>-<snowflake>
      lang: {type: string}
      source: {type: string}
      confidence: {type: number}# 0-1
      entropy: {type: number}   # 0-1 (higher = more ambiguous)
      trace: {type: list[string]}
      version: {type: number}

# -----------------------
# Skill Logic (Deterministic Guidance)
# -----------------------
skill_logic: |
  # Parsing & Normalization Pipeline
  1) Span: Segment the raw_text into candidate phrases (entities, numbers, dates, verbs).
  2) Type: Map each candidate to one of the seven primitive types (favor schedulability).
  3) Fill: Normalize fields:
     - Dates → ISO-8601 with time_zone (use reference_time for relative phrases).
     - Currency → ISO-4217 (USD, EUR...).
     - Tickers/indicators → resolve via vocab_seeds if provided.
  4) Score: For each primitive, set:
     - confidence (0-1) from extraction certainty.
     - entropy (0-1) from ambiguity/omissions; >0.4 triggers clarifications.
  5) Filter: If require_types is set, include only those types.
  6) Partial: If allow_partial=true, emit best-effort primitives with higher entropy.
  7) Clarify: Emit clarifications/questions for any ambiguity (“How many shares?”).
  8) Output: Return {primitives[], clarifications[], meta{entropy, confidence, trace_id}}.

  # Golden Rules
  - Do not invent facts. Prefer higher entropy + a clarification over guessing.
  - Keep one semantic axis per primitive. Split multi-intent sentences into multiple primitives.
  - Favor machine-readability (deterministic keys, controlled vocab).
  - Make outputs chainable into Decision / Action Planner / Reflection Cards.

validation:
  - Ensure every primitive matches its schema; drop ill-formed ones with a note.
  - Use ISO-8601 timestamps and explicit time_zone.
  - Currency amounts include both unit and quantity if stated; otherwise raise entropy.
  - Emit at least one clarification if any primitive’s entropy > 0.4.

# -----------------------
# Examples
# -----------------------
examples:
  - title: Finance — earnings pre-entry (English)
    input:
      raw_text: I want to buy a bit of Apple before earnings, maybe this Friday.
      language: en
      domain: finance
      time_zone: America/New_York
      reference_time: “2025-10-28T09:00:00-04:00”
      vocab_seeds:
        tickers: {Apple: AAPL}
    output: |
      primitives:
        - type: Entity
          name: AAPL
          kind: equity
          meta: {id: PRM-Entity-001, lang: en, source: raw_text, confidence: 0.95, entropy: 0.08}
        - type: Event
          verb: earnings_release
          time: “2025-10-31T16:00:00-04:00”
          actors: [AAPL]
          impact_hint: volatility_up
          meta: {id: PRM-Event-002, confidence: 0.88, entropy: 0.22}
        - type: Action
          verb: buy
          actor: user
          object: {type: Entity, name: AAPL, kind: equity}
          params: {quantity: null}
          meta: {id: PRM-Action-003, confidence: 0.72, entropy: 0.55}
      clarifications:
        - What exact quantity or notional size should “a bit” map to? (e.g., shares or USD)
        - Confirm earnings date/time for Apple—do you mean the upcoming Friday after the reference_time?
      meta:
        entropy: 0.42
        confidence: 0.86
        trace_id: MC01

  - title: Chinese input — explicit amounts (zh-CN)
    input:
      raw_text: 我想在财报前用两千美元在退休账户买入100股苹果。
      language: zh-CN
      domain: finance
      time_zone: America/New_York
      reference_time: “2025-10-28T09:00:00-04:00”
      vocab_seeds:
        tickers: {苹果: AAPL}
    output: |
      primitives:
        - type: Entity
          name: AAPL
          kind: equity
          meta: {id: PRM-Entity-010, lang: zh-CN, source: raw_text, confidence: 0.97, entropy: 0.06}
        - type: Resource
          name: cash
          unit: USD
          quantity: 2000
          meta: {id: PRM-Resource-011, confidence: 0.96, entropy: 0.05}
        - type: Event
          verb: 财报发布
          time: “2025-10-30T16:00:00-04:00”
          actors: [AAPL]
          meta: {id: PRM-Event-012, confidence: 0.92, entropy: 0.18}
        - type: Action
          verb: 买入
          actor: 用户
          object: {type: Entity, name: AAPL, kind: equity}
          params: {quantity: 100, account: 退休账户}
          meta: {id: PRM-Action-013, confidence: 0.94, entropy: 0.12}
      clarifications: []
      meta:
        entropy: 0.16
        confidence: 0.93
        trace_id: MC01

  - title: Policy & Obligation extraction
    input:
      raw_text: If price closes below the 20-day MA, trim half the position; settlement must be T+1.
      language: en
      domain: finance
    output: |
      primitives:
        - type: Policy
          rule: Close < MA20 → trim 50% position
          scope: target_instruments
          conditions:
            - {indicator: MA, window: 20, relation: below, target: close}
          meta: {id: PRM-Policy-020, confidence: 0.9, entropy: 0.18}
        - type: Obligation
          duty: settlement
          holder: user
          condition: T+1
          meta: {id: PRM-Obl-021, confidence: 0.88, entropy: 0.12}
      clarifications: []
      meta:
        entropy: 0.20
        confidence: 0.91
        trace_id: MC02

# -----------------------
# Postconditions (for chaining)
# -----------------------
postconditions:
  - primitives.length >= 1
  - meta.entropy <= 0.6
  - If any primitive.meta.entropy > 0.4, clarifications.length >= 1

notes:
  - This skill is the “Perception Layer”: understand before the Structure Cards act.
  - Pair with Decision / Action Planner skills. Output is designed to be machine-readable and auditable.


---
name: primitive-ir-compiler
description: >
  Convert high-entropy natural language into low-entropy Primitive IR objects
  (Entity, Resource, Event, Obligation, Action, Policy, Ledger) with metadata.
  Designed for chaining into Structure Cards (Decision, Action Planner, Reflection).
---
inputs:
  - id: raw_text
    type: string
    required: true
    description: High-entropy natural language to parse.
  - id: language
    type: string
    required: false
    default: en
    description: ISO language code of input (en, zh-CN, etc.).
  - id: domain
    type: string
    required: false
    default: general
    description: Domain hints (general, finance, law, education...).
  - id: time_zone
    type: string
    required: false
    default: America/New_York
    description: IANA time zone for normalizing dates/times.
  - id: reference_time
    type: string
    required: false
    description: ISO-8601 timestamp to resolve relative times like “tomorrow”.
  - id: require_types
    type: list[string]
    required: false
    description: If present, only emit these primitive types (e.g., [”Entity”,”Action”]).
  - id: allow_partial
    type: boolean
    required: false
    default: true
    description: Emit best-effort primitives even if some fields are missing (raise entropy).
  - id: vocab_seeds
    type: object
    required: false
    description: Controlled vocab seeds (e.g., tickers, units, indicators) to anchor fields.

outputs:
  - id: primitives
    type: list[object]
    description: List of Primitive IR objects (schemas below).
  - id: clarifications
    type: list[string]
    description: Natural-language questions/assumptions made to reduce entropy.
  - id: meta
    type: object
    description: Extraction diagnostics {entropy, confidence, trace_id, notes}.

# -----------------------
# Primitive IR Schemas
# -----------------------
schemas:
  entity:
    type: object
    required: [type, name]
    properties:
      type: {const: Entity}
      name: {type: string}
      kind: {type: string, enum_hint: [person, organization, equity, account, dataset, location]}
      attrs: {type: object}
      meta: {$ref: “#/schemas/meta”}
  resource:
    type: object
    required: [type, name, unit]
    properties:
      type: {const: Resource}
      name: {type: string}
      unit: {type: string}      # ISO-4217 for currency if applicable
      quantity: {type: number}
      meta: {$ref: “#/schemas/meta”}
  event:
    type: object
    required: [type, verb, time]
    properties:
      type: {const: Event}
      verb: {type: string}
      time: {type: string}      # ISO-8601 with time zone
      actors: {type: list[string]}
      impact_hint: {type: string}
      meta: {$ref: “#/schemas/meta”}
  obligation:
    type: object
    required: [type, duty, holder]
    properties:
      type: {const: Obligation}
      duty: {type: string}
      holder: {type: string}
      condition: {type: string}
      meta: {$ref: “#/schemas/meta”}
  action:
    type: object
    required: [type, verb, actor]
    properties:
      type: {const: Action}
      verb: {type: string}
      actor: {type: string}
      object: {type: object}    # usually an Entity
      params: {type: object}
      meta: {$ref: “#/schemas/meta”}
  policy:
    type: object
    required: [type, rule]
    properties:
      type: {const: Policy}
      rule: {type: string}
      scope: {type: string}
      conditions: {type: list[object]}
      meta: {$ref: “#/schemas/meta”}
  ledger:
    type: object
    required: [type, entry, timestamp]
    properties:
      type: {const: Ledger}
      entry: {type: string}
      timestamp: {type: string} # ISO-8601 with time zone
      ref: {type: object}
      meta: {$ref: “#/schemas/meta”}
  meta:
    type: object
    required: [id, confidence, entropy]
    properties:
      id: {type: string}        # PRM-<Type>-<snowflake>
      lang: {type: string}
      source: {type: string}
      confidence: {type: number}# 0-1
      entropy: {type: number}   # 0-1 (higher = more ambiguous)
      trace: {type: list[string]}
      version: {type: number}

# -----------------------
# Skill Logic (Deterministic Guidance)
# -----------------------
skill_logic: |
  # Parsing & Normalization Pipeline
  1) Span: Segment the raw_text into candidate phrases (entities, numbers, dates, verbs).
  2) Type: Map each candidate to one of the seven primitive types (favor schedulability).
  3) Fill: Normalize fields:
     - Dates → ISO-8601 with time_zone (use reference_time for relative phrases).
     - Currency → ISO-4217 (USD, EUR...).
     - Tickers/indicators → resolve via vocab_seeds if provided.
  4) Score: For each primitive, set:
     - confidence (0-1) from extraction certainty.
     - entropy (0-1) from ambiguity/omissions; >0.4 triggers clarifications.
  5) Filter: If require_types is set, include only those types.
  6) Partial: If allow_partial=true, emit best-effort primitives with higher entropy.
  7) Clarify: Emit clarifications/questions for any ambiguity (“How many shares?”).
  8) Output: Return {primitives[], clarifications[], meta{entropy, confidence, trace_id}}.

  # Golden Rules
  - Do not invent facts. Prefer higher entropy + a clarification over guessing.
  - Keep one semantic axis per primitive. Split multi-intent sentences into multiple primitives.
  - Favor machine-readability (deterministic keys, controlled vocab).
  - Make outputs chainable into Decision / Action Planner / Reflection Cards.

validation:
  - Ensure every primitive matches its schema; drop ill-formed ones with a note.
  - Use ISO-8601 timestamps and explicit time_zone.
  - Currency amounts include both unit and quantity if stated; otherwise raise entropy.
  - Emit at least one clarification if any primitive’s entropy > 0.4.

# -----------------------
# Examples
# -----------------------
examples:
  - title: Finance — earnings pre-entry (English)
    input:
      raw_text: I want to buy a bit of Apple before earnings, maybe this Friday.
      language: en
      domain: finance
      time_zone: America/New_York
      reference_time: “2025-10-28T09:00:00-04:00”
      vocab_seeds:
        tickers: {Apple: AAPL}
    output: |
      primitives:
        - type: Entity
          name: AAPL
          kind: equity
          meta: {id: PRM-Entity-001, lang: en, source: raw_text, confidence: 0.95, entropy: 0.08}
        - type: Event
          verb: earnings_release
          time: “2025-10-31T16:00:00-04:00”
          actors: [AAPL]
          impact_hint: volatility_up
          meta: {id: PRM-Event-002, confidence: 0.88, entropy: 0.22}
        - type: Action
          verb: buy
          actor: user
          object: {type: Entity, name: AAPL, kind: equity}
          params: {quantity: null}
          meta: {id: PRM-Action-003, confidence: 0.72, entropy: 0.55}
      clarifications:
        - What exact quantity or notional size should “a bit” map to? (e.g., shares or USD)
        - Confirm earnings date/time for Apple—do you mean the upcoming Friday after the reference_time?
      meta:
        entropy: 0.42
        confidence: 0.86
        trace_id: MC01

  - title: Chinese input — explicit amounts (zh-CN)
    input:
      raw_text: 我想在财报前用两千美元在退休账户买入100股苹果。
      language: zh-CN
      domain: finance
      time_zone: America/New_York
      reference_time: “2025-10-28T09:00:00-04:00”
      vocab_seeds:
        tickers: {苹果: AAPL}
    output: |
      primitives:
        - type: Entity
          name: AAPL
          kind: equity
          meta: {id: PRM-Entity-010, lang: zh-CN, source: raw_text, confidence: 0.97, entropy: 0.06}
        - type: Resource
          name: cash
          unit: USD
          quantity: 2000
          meta: {id: PRM-Resource-011, confidence: 0.96, entropy: 0.05}
        - type: Event
          verb: 财报发布
          time: “2025-10-30T16:00:00-04:00”
          actors: [AAPL]
          meta: {id: PRM-Event-012, confidence: 0.92, entropy: 0.18}
        - type: Action
          verb: 买入
          actor: 用户
          object: {type: Entity, name: AAPL, kind: equity}
          params: {quantity: 100, account: 退休账户}
          meta: {id: PRM-Action-013, confidence: 0.94, entropy: 0.12}
      clarifications: []
      meta:
        entropy: 0.16
        confidence: 0.93
        trace_id: MC01

  - title: Policy & Obligation extraction
    input:
      raw_text: If price closes below the 20-day MA, trim half the position; settlement must be T+1.
      language: en
      domain: finance
    output: |
      primitives:
        - type: Policy
          rule: Close < MA20 → trim 50% position
          scope: target_instruments
          conditions:
            - {indicator: MA, window: 20, relation: below, target: close}
          meta: {id: PRM-Policy-020, confidence: 0.9, entropy: 0.18}
        - type: Obligation
          duty: settlement
          holder: user
          condition: T+1
          meta: {id: PRM-Obl-021, confidence: 0.88, entropy: 0.12}
      clarifications: []
      meta:
        entropy: 0.20
        confidence: 0.91
        trace_id: MC02

# -----------------------
# Postconditions (for chaining)
# -----------------------
postconditions:
  - primitives.length >= 1
  - meta.entropy <= 0.6
  - If any primitive.meta.entropy > 0.4, clarifications.length >= 1

notes:
  - This skill is the “Perception Layer”: understand before the Structure Cards act.
  - Pair with Decision / Action Planner skills. Output is designed to be machine-readable and auditable.



```
